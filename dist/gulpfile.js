var gulp=require("gulp"),sass=require("gulp-sass"),autoprefixer=require("gulp-autoprefixer"),browserSync=require("browser-sync").create(),eslint=require("gulp-eslint"),uglify=require("gulp-uglify"),cssmin=require("gulp-cssmin"),htmlmin=require("gulp-htmlmin"),imagemin=require("gulp-imagemin"),jsonminify=require("gulp-jsonminify");gulp.task("serve",[],function(){browserSync.init({server:"./"}),browserSync.stream()}),gulp.task("default",["compress","compcss","comphtml","compimg","jsonmin","serve"],function(){gulp.watch("sass/**/*.scss",["styles"]),gulp.watch("js/**/*.js",["lint"])}),gulp.task("styles",function(){gulp.src("sass/**/*.scss").pipe(sass().on("error",sass.logError)).pipe(autoprefixer({browsers:["last 2 versions"]})).pipe(gulp.dest("./css"))}),gulp.task("lint",function(){return gulp.src(["js/**/*.js"]).pipe(eslint()).pipe(eslint.format()).pipe(eslint.failAfterError())}),gulp.task("compress",function(){return gulp.src(["./**/*.js"]).pipe(uglify()).pipe(gulp.dest("dist"))}),gulp.task("compcss",function(){gulp.src("css/**/*.css").pipe(cssmin()).pipe(gulp.dest("dist/css"))}),gulp.task("comphtml",function(){return gulp.src("./*.html").pipe(htmlmin({collapseWhitespace:!0})).pipe(gulp.dest("dist"))}),gulp.task("compimg",function(){gulp.src("imgs/**/*").pipe(imagemin()).pipe(gulp.dest("dist/imgs"))}),gulp.task("jsonmin",function(){return gulp.src(["data/*.json"]).pipe(jsonminify()).pipe(gulp.dest("dist/data"))}),gulp.task("serve:dist",function(){browserSync.init({server:"dist"}),browserSync.stream()});