"use strict";function first(e,r){for(var n=0,t=e&&e.length||0;t>n;n++)if(r(e[n]))return e[n];return null}function isErrorMessage(e){var r=e.fatal?2:e.severity;return Array.isArray(r)&&(r=r[0]),r>1}function countErrorMessage(e,r){return e+isErrorMessage(r)}function countWarningMessage(e,r){return e+(1===r.severity)}var TransformStream=require("stream").Transform,gutil=require("gulp-util"),objectAssign=require("object-assign"),CLIEngine=require("eslint").CLIEngine;exports.transform=function(e,r){var n=new TransformStream({objectMode:!0});return n._transform=e,"function"==typeof r&&(n._flush=r),n},exports.createIgnoreResult=function(e){return{filePath:e.path,messages:[{fatal:!1,severity:1,message:e.path.indexOf("node_modules/")<0?"File ignored because of .eslintignore file":"File ignored because it has a node_modules/** path"}],errorCount:0,warningCount:1}},exports.migrateOptions=function(e){return e="string"==typeof e?{configFile:e}:objectAssign({},e),(e["extends"]||e.ecmaFeatures)&&(e.baseConfig=objectAssign(e.baseConfig||{},e,{baseConfig:null})),e.globals=e.globals||e.global,null==e.globals||Array.isArray(e.globals)||(e.globals=Object.keys(e.globals).map(function(r){return e.globals[r]?r+":true":r})),e.envs=e.envs||e.env,null==e.envs||Array.isArray(e.envs)||(e.envs=Object.keys(e.envs).filter(function(r){return e.envs[r]})),null!=e.config&&(e.configFile=e.config),null!=e.rulesdir&&("string"==typeof e.rulesdir?e.rulePaths=[e.rulesdir]:e.rulePaths=e.rulesdir),null!=e.eslintrc&&(e.useEslintrc=e.eslintrc),e},exports.handleCallback=function(e,r){return function(n){null==n||n instanceof gutil.PluginError||(n=new gutil.PluginError(n.plugin||"gulp-eslint",n,{showStack:n.showStack!==!1})),e(n,r)}},exports.tryResultAction=function(e,r,n){try{e.length>1?e.call(this,r,n):(e.call(this,r),n())}catch(t){n(null==t?new Error("Unknown Error"):t)}},exports.firstResultMessage=function(e,r){return first(e.messages,r)},exports.isErrorMessage=isErrorMessage,exports.filterResult=function(e,r){"function"!=typeof r&&(r=isErrorMessage);var n=e.messages.filter(r,e);return{filePath:e.filePath,messages:n,errorCount:n.reduce(countErrorMessage,0),warningCount:n.reduce(countWarningMessage,0)}},exports.resolveFormatter=function(e){if("function"!=typeof e&&(e=CLIEngine.getFormatter(e)||e),"function"!=typeof e)throw new TypeError("Invalid Formatter");return e},exports.resolveWritable=function(e){return e?"function"==typeof e.write&&(e=e.write.bind(e)):e=gutil.log,e},exports.writeResults=function(e,r,n){var t;e||(e=[]),e.some(function(e){return t=e&&e.config});var s=r(e,t||{});n&&null!=s&&""!==s&&n(s)};